pipeline {
    agent any
    environment {
        DATABRICKS_HOST = credentials('databricks-host')
        DATABRICKS_CLIENT_ID = credentials('databricks-client-id')
        DATABRICKS_CLIENT_SECRET = credentials('databricks-client-secret')
    }
    stages {
        stage('Run Databricks Notebook') {
            steps {
                sh """
                databricks workspace list
                databricks notebook run --name '2 - Nettoyage et prétraitement des données' --path ''
                """
            }
        }
    }
}
